<!doctype html>
<html>
<head>
    <title>Match Runner</title>
    <meta name="keywords" content="" />
	<meta name="description" content="" />
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/style.css') }}">
    <!--style>
    body {
        margin:0;
        overflow: hidden;
    }
    img{
        top:0;
        left:0;
        width:100vw:
        height: 100vh;

        }
    
    </style-->
    <!--script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
    <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>

    <script type="text/javascript">
    jQuery(document).ready(function(){
	jQuery(".chosen").data("placeholder","Select Frameworks...").chosen();
    $("#watch_id").hide();
    $(function() {

                     $.ajax({
                         url: "{{ url_for('get_bots')}}",
                         type: "GET",
         
                     }).done(function(data) {
                         var titelliste = data.Bots
                         for (var i = 0; i < titelliste.length; i++) {
                             var selects = $('#bot1, #bot2');
                            var option = document.createElement("option");
                             option.text = titelliste[i];
                             selects.append(option);
                             selects.trigger("chosen:updated"); 
                         }
                     });
                     event.preventDefault();

             });
                 $(function() {

                     $.ajax({
                         url: "{{ url_for('get_maps')}}",
                         type: "GET",
         
                     }).done(function(data) {
                         var titelliste = data.Maps
                         var selects = $('#map');
                         var option = document.createElement("option");
                         option.text = 'Random'
                         selects.append(option);
                         selects.trigger("chosen:updated"); 
                         for (var i = 0; i < titelliste.length; i++) {
                            var selects = $('#map');
                            var option = document.createElement("option");
                             option.text = titelliste[i];
                             selects.append(option);
                             selects.trigger("chosen:updated"); 
                         }

                     });
                     event.preventDefault();

             });
             });
             $(function() {
                 $('a#play_button').on('click', function() {
                     if ($("input#visualize_id").is(":checked")){
                            
                            $("#watch_id").show();
                     }
                     else{
                        $("#watch_id").hide();
                     }
                    $.ajax({
                         url: "{{ url_for('run_games')}}",
                         type: "POST",
                         data:
                        {
                             "Bot1": $("#bot1").chosen().val(),
                             "Bot2": $("#bot2").chosen().val(),
                             "Map": $("#map").chosen().val(),
                             "Realtime": $("input#realtime_id").is(":checked"),                   
                             "Visualize": $("input#visualize_id").is(":checked")
                        },       
                    });
                     event.preventDefault();
             });
             });
             </script>
  </head>
  <body>
  <div class="wrapper">
    <header class="header">
    <img src="https://ai-arena.net/static/img/ai-arena-logo.png" alt="AI Arena Logo">
	</header><!-- .header-->

    <div class="middle">
        <div class="container">
            <main class="content">
                <h1>Bots</h1>
                <select class="chosen" multiple="true" style="width:400px;" id="bot1">
                </select><br><br>
                VS<br><br>
                <select class="chosen" multiple="true" style="width:400px;" id="bot2">
                </select><br><br>
                <select class="chosen" multiple="true" style="width:400px;" id="map">
                </select><br><br>
                Visualize: <label class="switch">
                <input id="visualize_id" type="checkbox" name="visualize">
                <span class="slider round"></span>
                </label><br><br>
                Realtime: <label class="switch">
                <input id="realtime_id" type="checkbox" name="realtime">
                <span class="slider round"></span>
                </label><br><br>
                <a href="#" id="play_button"><button class='btn btn-default'>Play</button></a><br><br>
                <div id="watch_id">
                    <h1>Live Feed</h1>
                    <a href="{{ url_for('watch') }}">Watch</a><br>
                <div>
            </main><!-- .content -->
            <!--TODO: Add a results history table here-->
		</div><!-- .container-->
    <aside class="left-sidebar">
        <a href="{{url_for('settings')}}">Settings</a><br>
        AI Arena Login
    </aside><!-- .left-sidebar -->

    </div>
  </div>
  </body>
  
</html>




       
